feat: Add PRO Smart Entry Engine with confluence scoring

be59ea5

Restore All

Implements institutional-grade entry analysis system that analyzes
8 data sources and provides confluence-scored entry recommendations
with complete risk management.

Key Features:
1. Multi-Source Analysis (8 Data Sources)
Price Action: Candlestick patterns, S/R levels, trends
Volume: Spike detection, trend analysis
Funding Rate: Trend tracking, squeeze prediction (NO HEATMAP)
Long/Short Ratio: Contrarian signals, sentiment
Open Interest: Trend, divergence detection
Order Book: Depth analysis, buy/sell walls
Smart Money: Top trader positions, large transactions
Social: Sentiment, viral detection (LunarCrush)
2. Confluence Scoring System (0-100)
Weighted scoring:

Price Action: 15%
Volume: 12%
Funding: 15%
Long/Short: 13%
OI: 12%
Order Book: 10%
Smart Money: 13%
Social: 10%
Strength Levels:

85-100: VERY STRONG (immediate entry)
70-84: STRONG (enter soon)
60-69: GOOD (wait for confirmation)
<60: AVOID (low probability)
3. Complete Risk Management
For each signal provides:

Entry Zone (range, not single price)
Stop Loss (based on support/resistance)
Multiple Take Profits (TP1, TP2, TP3)
Risk/Reward Ratio (calculated)
Position Sizing (% of portfolio based on confidence)
Urgency Level (immediate/soon/wait/avoid)
4. Professional Telegram Alerts
Formatted alerts include:

Confluence score breakdown
All entry levels (entry zone, SL, TPs)
Risk/reward analysis
Position sizing recommendation
Complete reasoning (why each signal)
Step-by-step trading plan
Components Added:
1. Smart Entry Engine (smart_entry_engine.py) - 1300+ lines
Core analysis engine:

Individual metric analyzers (8 sources)
Candlestick pattern detection
Support/resistance calculation
Confluence scoring algorithm
Entry zone calculator
SL/TP calculator
Risk/reward analyzer
Position size calculator
2. Pro Alert Formatter (pro_alert_formatter.py)
Professional Telegram formatting:

Full alert (detailed analysis)
Short alert (compact version)
Institutional-grade layout
Actionable trading plans
3. Smart Entry API Routes (routes_smart_entry.py)
Endpoints:

GET /smart-entry/analyze/{symbol} - Single coin analysis
POST /smart-entry/analyze-batch - Multi-coin scanning
GET /smart-entry/test/{symbol} - Test with preview
GET /smart-entry/health - Health check
4. Complete Documentation
SMART_ENTRY_ENGINE_PRO_GUIDE.md (500+ lines)
Full usage guide
API examples
Metrics explanation
Best practices
Troubleshooting
Usage Example:
Single Analysis:
GET /smart-entry/analyze/FILUSDT?timeframe=1h&send_telegram=true

Returns:

Confluence: 85/100 (VERY STRONG)
Direction: LONG
Entry: $1.975 - $1.990
SL: $1.945
TP1: $2.030, TP2: $2.050, TP3: $2.080
R:R: 1:3.5 (EXCELLENT)
Position: 10% of portfolio
Urgency: IMMEDIATE
Batch Scanning:
POST /smart-entry/analyze-batch
{
  "symbols": ["FILUSDT", "ARBUSDT", "OPUSDT", "IMXUSDT"],
  "min_confluence": 70,
  "send_telegram": true
}

Returns best opportunities sorted by confluence score.

Telegram Alert Example:
ðŸŸ¢ FILUSDT - LONG ENTRY SETUP
ðŸ”¥ CONFLUENCE SCORE: 85/100
â”œâ”€ Strength: VERY_STRONG
â”œâ”€ Signals Analyzed: 8
â”œâ”€ Bullish: 6
â”œâ”€ Bearish: 1
â””â”€ Neutral: 1
ðŸ“ ENTRY ZONE:
â”œâ”€ Entry Low: $1.975000
â””â”€ Entry High: $1.990000
ðŸ›‘ STOP LOSS:
â””â”€ SL: $1.945000
   (1.52% risk)
ðŸŽ¯ TAKE PROFIT TARGETS:
â”œâ”€ TP1: $2.030000
â”‚  (+2.78%)
â”œâ”€ TP2: $2.050000
â”‚  (+3.80%)
â””â”€ TP3: $2.080000
   (+5.32%)
ðŸŽ¯ RISK/REWARD ANALYSIS:
â”œâ”€ Risk/Reward Ratio: 1:3.50
â””â”€ Rating: EXCELLENT
ðŸ’° POSITION SIZING:
â””â”€ Suggested Size: 10.0% of portfolio
   (High conviction trade)
ðŸ“Š CONFLUENCE BREAKDOWN:
â”œâ”€ Price Action: 13
â”œâ”€ Funding: 12
â”œâ”€ Smart Money: 12
â”œâ”€ Long Short: 11
â”œâ”€ Volume: 10
â”œâ”€ Open Interest: 10
â”œâ”€ Order Book: 9
â””â”€ Social: 8
ðŸ” KEY SIGNALS:
â”œâ”€ Price: Bullish Engulfing detected (bullish)
â”œâ”€ Volume: Spike detected (+240.0%)
â”œâ”€ Sentiment: extremely_bearish (25% longs) â†’ Contrarian long
â”œâ”€ Open Interest: +12.0% (bullish)
â”œâ”€ Order Book: Imbalance 1.80 (bullish)
â”œâ”€ Smart Money: Top traders 68% long (bullish)
â””â”€ Confluence: 6 bullish, 1 bearish, 1 neutral signals
ðŸš¨ URGENCY: IMMEDIATE
ðŸ“‹ SUGGESTED TRADING PLAN:
1. Set buy limit orders in entry zone
2. Place stop loss at $1.945000
3. Take 33% profit at TP1 ($2.030000)
4. Take 33% profit at TP2 ($2.050000)
5. Take 34% profit at TP3 ($2.080000)
6. Move SL to breakeven after TP1 hit
â° 2025-11-19 14:30:45 UTC
ðŸ”— CryptoSatX PRO - Smart Entry Engine

What Makes It PRO:
âœ… Multi-source confluence (not single indicator)
âœ… Weighted scoring system (institutional approach)
âœ… Complete risk management (entry, SL, TPs, sizing)
âœ… Batch analysis (scan multiple coins efficiently)
âœ… Professional alerts (actionable, not informational)
âœ… Performance tracking ready
âœ… No liquidation heatmap dependency (works with basic tier)

Integration:
Standalone API (can be used independently)
Can integrate with comprehensive_monitor later
Compatible with existing Telegram notifications
Uses existing API services (CoinAPI, Coinglass, LunarCrush)
Documentation:
docs/SMART_ENTRY_ENGINE_PRO_GUIDE.md